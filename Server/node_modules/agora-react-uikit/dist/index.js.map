{"version":3,"file":"index.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.mjs","../src/RtcContext.tsx","../src/PropsContext.tsx","../src/MaxUidContext.tsx","../src/MinUidContext.tsx","../src/TracksContext.tsx","../src/Reducer.tsx","../src/Controls/Local/screenshareFunctions.tsx","../src/RTCConfigure.tsx","../src/Controls/Icons.tsx","../src/Controls/BtnTemplate.tsx","../src/Controls/Local/EndCall.tsx","../src/LocalUserContext.tsx","../src/Controls/Local/muteAudio.ts","../src/Controls/Local/LocalAudioMute.tsx","../src/Controls/Local/Screenshare.tsx","../src/Controls/Local/muteVideo.ts","../src/Controls/Local/LocalVideoMute.tsx","../src/Controls/LocalControls.tsx","../src/RtmContext.tsx","../src/Controls/Remote/RemoteVideoMute.tsx","../src/Controls/Remote/RemoteAudioMute.tsx","../src/Controls/SwapUser.tsx","../src/VideoPlaceholder.tsx","../src/Username.tsx","../src/MaxVideoView.tsx","../src/MinVideoView.tsx","../src/PinnedVideo.tsx","../src/GridVideo.tsx","../src/TracksConfigure.tsx","../src/RTMConfigure.tsx","../src/Controls/Remote/RemoteMutePopUp.tsx","../src/AgoraUIKit.tsx"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React from 'react'\nimport {\n  IAgoraRTCClient,\n  ILocalAudioTrack,\n  ILocalVideoTrack,\n  UID\n} from 'agora-rtc-react'\nimport { CallbacksInterface, mediaStore } from './PropsContext'\n\nexport type DispatchType = <\n  T extends keyof CallbacksInterface,\n  V extends Parameters<CallbacksInterface[T]>\n>(action: {\n  type: T\n  value: V\n}) => void\n\n/**\n * Interface for the RtcContext\n */\nexport interface RtcContextInterface {\n  /**\n   * The client object used by the web SDK\n   */\n  client: IAgoraRTCClient\n  /**\n   * The local user's video track\n   */\n  localVideoTrack: ILocalVideoTrack | null\n  /**\n   * The local user's audio track\n   */\n  localAudioTrack: ILocalAudioTrack | null\n  /**\n   * An object containing a key value store of tracks mapped to users UIDs\n   */\n  mediaStore: mediaStore\n  /**\n   * React dispatch to update values in the reducer\n   */\n  dispatch: DispatchType\n  /**\n   * The local UID returned by the SDK when using local uid as 0.\n   */\n  localUid: React.MutableRefObject<UID | undefined>\n  /**\n   * Is the UIKit in a channel\n   */\n  channelJoined: boolean\n  toggleScreensharing: () => Promise<void>\n  isScreensharing: boolean\n}\n/**\n * Context to access local/remote tracks, client, dispatch and localuid. It's setup by {@link RtcConfigure}.\n */\nconst RtcContext = React.createContext<RtcContextInterface>(\n  {} as RtcContextInterface\n)\n\nexport interface ActionInterface<T extends keyof CallbacksInterface> {\n  type: T\n  value: Parameters<CallbacksInterface[T]>\n}\nexport type ActionType<T extends keyof CallbacksInterface> = ActionInterface<T>\n\nexport const RtcProvider = RtcContext.Provider\nexport const RtcConsumer = RtcContext.Consumer\nexport default RtcContext\n","import {\n  IAgoraRTCClient,\n  VideoPlayerConfig,\n  IRemoteAudioTrack,\n  IRemoteVideoTrack,\n  ILocalVideoTrack,\n  ILocalAudioTrack,\n  UID,\n  RemoteStreamFallbackType,\n  ConnectionState,\n  ConnectionDisconnectedReason,\n  IAgoraRTCRemoteUser,\n  RemoteStreamType,\n  ChannelMediaRelayState,\n  ChannelMediaRelayError,\n  ChannelMediaRelayEvent,\n  NetworkQuality,\n  AgoraRTCError,\n  IMicrophoneAudioTrack,\n  ICameraVideoTrack\n} from 'agora-rtc-react'\n// import {RtmChannelEvents} from 'agora-rtm-react'\nimport React from 'react'\nimport { rtmCallbacks } from './RtmContext'\n\ninterface media {\n  videoTrack?: IRemoteVideoTrack\n  audioTrack?: IRemoteAudioTrack\n}\ninterface localMedia {\n  videoTrack?: ILocalVideoTrack\n  audioTrack?: ILocalAudioTrack\n}\n\nexport type mediaStore = {\n  [key in UID]: media | localMedia\n}\n\nexport enum remoteTrackState {\n  yes = 0, // remote published\n  subbed = 1, // remote published and subscribed\n  no = 2 // remote unpublished\n}\n\n/**\n * Data type for a UIKitUser\n */\nexport type UIKitUser = RemoteUIKitUser | LocalUIKitUser\nexport interface LocalUIKitUser {\n  /**\n   * The ID of the remote user.\n   */\n  uid: 0\n  /**\n   * Whether the remote user is sending an audio track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasAudio: ToggleState\n  /**\n   * Whether the remote user is sending a video track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasVideo: ToggleState\n}\nexport interface RemoteUIKitUser {\n  /**\n   * The ID of the remote user.\n   */\n  uid: UID\n  /**\n   * Whether the remote user is sending an audio track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasAudio: remoteTrackState\n  /**\n   * Whether the remote user is sending a video track.\n   * - `true`: The remote user is sending an audio track.\n   * - `false`: The remote user is not sending an audio track.\n   */\n  hasVideo: remoteTrackState\n}\n\n/**\n * Remote Buttons styles\n */\ninterface remoteBtnStylesInterface {\n  /**\n   * Style for the remote mute audio button\n   */\n  muteRemoteAudio?: React.CSSProperties\n  /**\n   * Style for the remote mute video button\n   */\n  muteRemoteVideo?: React.CSSProperties\n  /**\n   * Style for the remote swap button in pinned layout\n   */\n  remoteSwap?: React.CSSProperties\n  /**\n   * Style for the overlay close button\n   */\n  minCloseBtnStyles?: React.CSSProperties\n}\n\n/**\n * Local Buttons styles\n */\ninterface localBtnStylesInterface {\n  /**\n   * Style for the local mute audio button\n   */\n  muteLocalAudio?: React.CSSProperties\n  /**\n   * Style for the local screenshare button\n   */\n  screenshare?: React.CSSProperties\n  /**\n   * Style for the local mute video button\n   */\n  muteLocalVideo?: React.CSSProperties\n  /**\n   * Style for the switch camera button\n   */\n  switchCamera?: React.CSSProperties\n  /**\n   * Style for the end call button\n   */\n  endCall?: React.CSSProperties\n}\n\n/**\n * Props object for customising the UI Kit, takes in react native styling\n */\nexport interface StylePropInterface {\n  /**\n   * Sets the scaling of the video\n   */\n  videoMode?: {\n    max?: VideoPlayerConfig['fit']\n    min?: VideoPlayerConfig['fit']\n  }\n  /**\n   * Color tint for icons\n   */\n  theme?: string\n  /**\n   * Color tint for icons\n   */\n  iconSize?: number\n  /**\n   * Custom base64 string for icon\n   */\n  customIcon?: Partial<IconsInterface>\n  /**\n   * Globals style for the local buttons (except end call)\n   */\n  BtnTemplateStyles?: React.CSSProperties\n  /**\n   * Style for the big view in pinned layout\n   */\n  maxViewStyles?: React.CSSProperties\n  /**\n   * Style for the small view in pinned layout\n   */\n  minViewStyles?: React.CSSProperties\n  /**\n   * Style for the small view container\n   */\n  minViewContainer?: React.CSSProperties\n  /**\n   * Style for the big view container\n   */\n  maxViewContainer?: React.CSSProperties\n  /**\n   * Style for the overlay on small user view when pressed in pinned layout\n   */\n  minViewOverlayContainer?: React.CSSProperties\n  /**\n   * Style for the overlay on small user view when pressed in pinned layout\n   */\n  maxViewOverlayContainer?: React.CSSProperties\n  /**\n   * Style for the remote button\n   */\n  remoteBtnStyles?: remoteBtnStylesInterface\n  /**\n   * Style for the remote button container\n   */\n  remoteBtnContainer?: React.CSSProperties\n  /**\n   * Style for specific local buttons, overrides the style applied by BtnTemplateStyles prop\n   */\n  localBtnStyles?: localBtnStylesInterface\n  /**\n   * Style for the local button container\n   */\n  localBtnContainer?: React.CSSProperties\n  /**\n   * Applies style to the individual cell (view) containing the video in the grid layout\n   */\n  gridVideoCells?: React.CSSProperties\n  /**\n   * Applies style to the grid container\n   */\n  gridVideoContainer?: React.CSSProperties\n  /**\n   * Applies style to the grid container\n   */\n  pinnedVideoContainer?: React.CSSProperties\n  /**\n   * Applies style to the pinned scrollview container\n   */\n  scrollViewContainer?: React.CSSProperties\n  /**\n   * Applies style to the global view containing the UI Kit\n   */\n  UIKitContainer?: React.CSSProperties\n  /**\n   * Applies style to the pop up container for remote mute requests\n   */\n  popUpContainer?: React.CSSProperties\n  /**\n   * Applies style to the displayed username text container\n   */\n  usernameText?: React.CSSProperties\n}\n\n/**\n * Props for the VideoPlaceholder component\n */\nexport interface VideoPlaceholderProps {\n  user: UIKitUser\n  /**\n   * State value to display buttons\n   */\n  isShown: boolean\n  showButtons?: boolean\n  showSwap?: boolean\n}\n\n/**\n * Props object for customising the UI Kit functionality\n */\nexport interface RtcPropsInterface {\n  /**\n   * React functional component for overriding the default video placeholder\n   */\n  CustomVideoPlaceholder?: React.FunctionComponent<VideoPlaceholderProps>\n  /**\n   * enable screensharing feature\n   */\n  enableScreensharing?: boolean\n  /**\n   * Agora App ID - used to authenticate the request\n   */\n  appId: string\n  /**\n   * Channel name to join - users in the same channel can communicate with each other\n   */\n  channel: string\n  /**\n   * UID for local user to join the channel (default: 0)\n   */\n  uid?: number\n  /**\n   * UID for local user to join the channel (default: 1)\n   */\n  screenshareUid?: number\n  /**\n   * Token used to join a channel when using secured mode (default: null)\n   */\n  token?: string | null\n  /**\n   * Token used to join a channel when using secured mode (default: null)\n   */\n   screenshareToken?: string | null\n  /**\n   * URL for token server, manages fetching and updating tokens automatically. Must follow the schema here - https://github.com/AgoraIO-Community/agora-token-service/\n   */\n  tokenUrl?: string\n  /**\n   * Set to true to enable active speaker callback, switches the pinned video to active speaker if you're using the pinned layout. (default: false)\n   */\n  activeSpeaker?: boolean\n  /**\n   * Once set to true, the UI Kit attempts to join the channel. Can be set to false to initialise the SDK and wait before joining the channel. (default: true)\n   */\n  callActive?: boolean\n  /**\n   * Pass in a custom RTC client, to use your own implementation of the AgoraRTCClient.\n   */\n  customRtcClient?: IAgoraRTCClient\n  /**\n   * Enables dual stream mode. (default: false)\n   */\n  enableDualStream?: boolean\n  /**\n   * Enable dual stream mode with selected fallback option. (default: disabled)\n   */\n  dualStreamMode?: RemoteStreamFallbackType\n  /**\n   * Choose between grid layout and pinned layout. (default: pinned layout)\n   */\n  layout?: layout\n  /**\n   * Set local user's role between audience and host. Use with mode set to livestreaming. (default: host)\n   */\n  role?: role\n  /**\n   * Enable the mic before joining the call. (default: true)\n   */\n  enableAudio?: boolean\n  /**\n   * Enable the camera before joining the call. Only use for initiak(default: true)\n   */\n  enableVideo?: boolean\n  /**\n   * Disable Agora RTM, this also disables the use of usernames and remote mute functionality\n   */\n  disableRtm?: boolean\n}\n\n/**\n * Props object for customising the UI Kit signalling functionality\n */\nexport interface RtmPropsInterface {\n  /**\n   * Username for the RTM Client, this value can be accessed using the userData object\n   */\n   username?: string\n   /**\n    * Token used to join an RTM channel when using secured mode (default: null)\n    */\n   token?: string | undefined\n   /**\n    * UID for local user to join the RTM channel (default: uses the RTC UID)\n    */\n   uid?: string\n   /**\n    * Show a pop up with option to accept mute request instead of directly muting the remote user (default: true), if set to false you cannot unmute users. \n    */\n   showPopUpBeforeRemoteMute?: boolean\n   /**\n    * Display RTM usernames in the Videocall (default: false)\n    */\n   displayUsername?: boolean\n}\n\n/**\n * Select a pre built layout\n */\nexport enum layout {\n  /**\n   * 0: Grid layout: each user occupies a cell in the grid\n   */\n  grid = 0,\n  /**\n   * 2: Pinned layout: MaxUser occupies the main view, the other users are in a floating view on top\n   */\n  pin = 1\n}\n\n/**\n * User role for live streaming mode\n */\ntype role = 'audience' | 'host'\n\n\nexport enum ToggleState {\n  disabled, // set as 0 - to evaluate falsy\n  enabled, // set as 1 - to evaluate truthy\n  disabling, // enabled -> disabling -> disabled\n  enabling // disabled -> enabling -> enabled\n}\n\n/**\n * Callbacks exposed by the UIKit\n */\nexport type CallbacksInterface = UIKitEventsInterface &\n  RtcEventsInterface\nexport interface UIKitEventsInterface {\n  EndCall(): void\n  ActiveSpeaker(uid: UID): void\n  Screensharing(state: boolean): void\n  ['update-user-video'](\n    tracks: [IMicrophoneAudioTrack, ICameraVideoTrack]\n  ): void\n  ['user-swap'](user: UIKitUser): void\n  ['local-user-mute-video'](status: ToggleState): void\n  ['local-user-mute-audio'](status: ToggleState): void\n  ['remote-user-mute-video'](user: UIKitUser, status: remoteTrackState): void\n  ['remote-user-mute-audio'](user: UIKitUser, status: remoteTrackState): void\n  ['leave-channel'](): void\n}\nexport interface RtcEventsInterface {\n  ['connection-state-change'](\n    curState: ConnectionState,\n    revState: ConnectionState,\n    reason?: ConnectionDisconnectedReason\n  ): void\n  ['user-joined'](user: IAgoraRTCRemoteUser): void\n  ['user-left'](user: IAgoraRTCRemoteUser, reason: string): void\n  ['user-published'](\n    user: IAgoraRTCRemoteUser,\n    mediaType: 'audio' | 'video'\n  ): void\n  ['user-unpublished'](\n    user: IAgoraRTCRemoteUser,\n    mediaType: 'audio' | 'video'\n  ): void\n  ['user-info-updated'](\n    uid: UID,\n    msg:\n      | 'mute-audio'\n      | 'mute-video'\n      | 'enable-local-video'\n      | 'unmute-audio'\n      | 'unmute-video'\n      | 'disable-local-video'\n  ): void\n  ['media-reconnect-start'](uid: UID, streamType: RemoteStreamType): void\n  ['media-reconnect-end'](uid: UID, streamType: RemoteStreamType): void\n  ['stream-type-changed'](uid: UID, streamType: RemoteStreamType): void\n  ['stream-fallback'](\n    uid: UID,\n    isFallbackOrRecover: 'fallback' | 'recover'\n  ): void\n  ['channel-media-relay-state'](\n    state: ChannelMediaRelayState,\n    code: ChannelMediaRelayError\n  ): void\n  ['channel-media-relay-event'](event: ChannelMediaRelayEvent): void\n  ['volume-indicator'](\n    result: {\n      level: number\n      uid: UID\n    }[]\n  ): void\n  ['crypt-error'](): void\n  ['token-privilege-will-expire'](): void\n  ['token-privilege-did-expire'](): void\n  ['network-quality'](stats: NetworkQuality): void\n  ['live-streaming-error'](url: string, err: AgoraRTCError): void\n  ['live-streaming-warning'](url: string, warning: AgoraRTCError): void\n  ['stream-inject-status'](\n    status: InjectStreamEventStatus,\n    uid: UID,\n    url: string\n  ): void\n  ['is-using-cloud-proxy'](isUsingProxy: boolean): void\n}\nexport interface PropsInterface {\n  /**\n   * Props used to customise the UIKit communication functionality\n   */\n  rtcProps: RtcPropsInterface\n  /**\n   * Props used to customise the UIKit signalling functionality\n   */\n  rtmProps?: RtmPropsInterface\n  /**\n   * Props used to customise the UI Kit's appearance (accepts style object for different components)\n   */\n  styleProps?: Partial<StylePropInterface>\n  /**\n   * Callbacks for different functions of the UI Kit\n   */\n  callbacks?: Partial<CallbacksInterface>\n  /**\n   * Callbacks for different functions of the UI Kit\n   */\n  rtmCallbacks?: rtmCallbacks\n}\n\n/**\n * Interface for icons supplied with the UIKit (curtosy of https://feathericons.com/)\n */\nexport interface IconsInterface {\n  /**\n   * Icon for Camera/Video mute in on state\n   */\n  videocam: string\n  /**\n   * Icon for Camera/Video mute in off state\n   */\n  videocamOff: string\n  /**\n   * Icon for Mic/Audio mute in on state\n   */\n  mic: string\n  /**\n   * Icon for Mic/Audio mute in off state\n   */\n  micOff: string\n  /**\n   * Icon to switch between device cameras\n   */\n  switchCamera: string\n  /**\n   * Icon to end the call\n   */\n  callEnd: string\n  /**\n   * Icon to swap the min user to max view\n   */\n  remoteSwap: string\n  /**\n   * Icon to close the overlay in floating layout\n   */\n  close: string\n}\n\nconst initialValue: PropsInterface = {\n  rtcProps: {\n    appId: '',\n    channel: '',\n    role: 'host'\n  },\n  rtmProps: {}\n}\n/**\n * React Context to manage the user props\n */\nconst PropsContext = React.createContext<PropsInterface>(initialValue)\n\nexport const PropsProvider = PropsContext.Provider\nexport const PropsConsumer = PropsContext.Consumer\n\nconst enum InjectStreamEventStatus {\n  /**\n   * Successfully injects the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_SUCCESS = 0,\n  /**\n   * The online media stream already exists.\n   */\n  INJECT_STREAM_STATUS_START_ALREADY_EXISTS = 1,\n  /**\n   * Injecting the online media stream is not authorized.\n   */\n  INJECT_STREAM_STATUS_START_UNAUTHORIZED = 2,\n  /**\n   * Timeout when injecting the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_TIMEOUT = 3,\n  /**\n   * Fails to inject the online media stream.\n   */\n  INJECT_STREAM_STATUS_START_FAILED = 4,\n  /**\n   * Succeessfully stops injecting the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_SUCCESS = 5,\n  /**\n   * Fails to find the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_NOT_FOUND = 6,\n  /**\n   * Stopping injecting the online media stream is not authorized.\n   */\n  INJECT_STREAM_STATUS_STOP_UNAUTHORIZED = 7,\n  /**\n   * Timeout when stopping the online media stream.\n   */\n  INJECT_STREAM_STATUS_STOP_TIMEOUT = 8,\n  INJECT_STREAM_STATUS_STOP_FAILED = 9,\n  /**\n   * The online media stream is corrupted.\n   */\n  INJECT_STREAM_STATUS_BROKEN = 10\n}\n\nexport default PropsContext\n","import React from 'react'\nimport { UIKitUser } from './PropsContext'\n\n/**\n * React context to expose user array displayed in the maximised view\n */\nconst MaxUidContext = React.createContext<UIKitUser[]>([])\n\nexport const MaxUidProvider = MaxUidContext.Provider\nexport const MaxUidConsumer = MaxUidContext.Consumer\nexport default MaxUidContext\n","import React from 'react'\nimport { UIKitUser } from './PropsContext'\n\n/**\n * React context to expose user array displayed in the minimized view\n */\nconst MinUidContext = React.createContext<UIKitUser[]>([])\n\nexport const MinUidProvider = MinUidContext.Provider\nexport const MinUidConsumer = MinUidContext.Consumer\nexport default MinUidContext\n","import React from 'react'\nimport { ILocalAudioTrack, ILocalVideoTrack } from 'agora-rtc-react'\n\nexport interface TracksContextInterface {\n  localVideoTrack: ILocalVideoTrack | null\n  localAudioTrack: ILocalAudioTrack | null\n}\n/**\n * React context that contains the local audio and video tracks. It's setup by {@link TracksConfigure}.\n */\nconst TracksContext = React.createContext<TracksContextInterface>(\n  {} as TracksContextInterface\n)\n\nexport const TracksProvider = TracksContext.Provider\nexport const TracksConsumer = TracksContext.Consumer\nexport default TracksContext\n","import { ActionType } from './RtcContext'\nimport {\n  UIKitUser,\n  remoteTrackState,\n  CallbacksInterface,\n  RemoteUIKitUser,\n  ToggleState\n} from './PropsContext'\nimport { UID } from 'agora-rtc-react'\nimport { actionTypeGuard } from './Utils/actionTypeGuard'\n\ntype stateType = {\n  max: UIKitUser[]\n  min: UIKitUser[]\n  isScreensharing: boolean\n}\n\nexport const initState = {\n  max: [\n    {\n      uid: 0,\n      hasAudio: remoteTrackState.no,\n      hasVideo: remoteTrackState.no\n    }\n  ] as UIKitUser[],\n  min: [] as UIKitUser[],\n  isScreensharing: false\n}\n\nconst reducer = (\n  state: stateType,\n  action: ActionType<keyof CallbacksInterface>\n) => {\n  let stateUpdate: Partial<stateType> = initState\n  const uids: UID[] = [...state.max, ...state.min].map((u: UIKitUser) => u.uid)\n\n  switch (action.type) {\n    case 'Screensharing':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = { ...state, isScreensharing: action.value[0] }\n        console.log('!Screensharingstate', state, stateUpdate)\n      }\n      break\n    case 'update-user-video':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: remoteTrackState.subbed,\n                hasVideo: remoteTrackState.subbed\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: remoteTrackState.subbed,\n                hasVideo: remoteTrackState.subbed\n              }\n            } else {\n              return user\n            }\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'user-joined':\n      if (actionTypeGuard(action, action.type)) {\n        if (uids.indexOf(action.value[0].uid) === -1) {\n          const minUpdate: stateType['min'] = [\n            ...state.min,\n            {\n              uid: action.value[0].uid,\n              hasAudio: remoteTrackState.no,\n              hasVideo: remoteTrackState.no\n            }\n          ]\n          if (minUpdate.length === 1 && state.max[0].uid === 0) {\n            stateUpdate = {\n              max: minUpdate,\n              min: state.max,\n              isScreensharing: state.isScreensharing\n            }\n          } else {\n            stateUpdate = {\n              min: minUpdate,\n              max: state.max,\n              isScreensharing: state.isScreensharing\n            }\n          }\n          // console.log('new user joined!\\n', action.value[0].uid)\n        }\n      }\n      break\n    case 'user-unpublished':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          stateUpdate = {\n            max: [\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.no\n                    : (state.max[0].hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.no\n                    : (state.max[0].hasVideo as remoteTrackState)\n              }\n            ],\n            min: state.min,\n            isScreensharing: state.isScreensharing\n          }\n        } else {\n          const UIKitUser = state.min.find(\n            (user: UIKitUser) => user.uid === action.value[0].uid\n          )\n          if (UIKitUser) {\n            const minUpdate: stateType['min'] = [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0].uid\n              ),\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.no\n                    : (UIKitUser.hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.no\n                    : (UIKitUser.hasVideo as remoteTrackState)\n              }\n            ]\n            stateUpdate = {\n              min: minUpdate,\n              max: state.max,\n              isScreensharing: state.isScreensharing\n            }\n          }\n        }\n      }\n      break\n    case 'user-published':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          stateUpdate = {\n            max: [\n              {\n                uid: action.value[0].uid,\n                hasAudio:\n                  action.value[1] === 'audio'\n                    ? remoteTrackState.subbed\n                    : (state.max[0].hasAudio as remoteTrackState),\n                hasVideo:\n                  action.value[1] === 'video'\n                    ? remoteTrackState.subbed\n                    : (state.max[0].hasVideo as remoteTrackState)\n              }\n            ],\n            min: state.min,\n            isScreensharing: state.isScreensharing\n          }\n        } else {\n          stateUpdate = {\n            min: state.min.map((user) => {\n              if (user.uid !== action.value[0].uid) {\n                return user\n              } else {\n                return {\n                  uid: user.uid,\n                  hasAudio:\n                    action.value[1] === 'audio'\n                      ? remoteTrackState.subbed\n                      : (user.hasAudio as remoteTrackState),\n                  hasVideo:\n                    action.value[1] === 'video'\n                      ? remoteTrackState.subbed\n                      : (user.hasVideo as remoteTrackState)\n                }\n              }\n            }),\n            max: state.max,\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n    case 'user-left':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n          const minUpdate = [...state.min]\n          stateUpdate = {\n            max: [minUpdate.pop() as UIKitUser],\n            min: minUpdate,\n            isScreensharing: state.isScreensharing\n          }\n        } else {\n          stateUpdate = {\n            min: state.min.filter((user) => user.uid !== action.value[0].uid),\n            max: state.max,\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n    case 'user-swap':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0].uid) {\n        } else {\n          stateUpdate = {\n            max: [action.value[0]],\n            min: [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0].uid\n              ),\n              state.max[0]\n            ],\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n    case 'local-user-mute-video':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: user.hasAudio as ToggleState,\n                hasVideo: action.value[0]\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: user.hasAudio as ToggleState,\n                hasVideo: action.value[0]\n              }\n            } else {\n              return user\n            }\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'local-user-mute-audio':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: action.value[0],\n                hasVideo: user.hasVideo as ToggleState\n              }\n            } else {\n              return user\n            }\n          }),\n          max: state.max.map((user) => {\n            if (user.uid === 0) {\n              return {\n                uid: 0,\n                hasAudio: action.value[0],\n                hasVideo: user.hasVideo as ToggleState\n              }\n            } else {\n              return user\n            }\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'remote-user-mute-video':\n      if (actionTypeGuard(action, action.type)) {\n        // window['track'] = action.value.videoTrack\n        // window['client'] = client\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid) {\n              return {\n                uid: user.uid,\n                hasVideo: action.value[1],\n                hasAudio: user.hasAudio\n              } as RemoteUIKitUser\n            } else return user\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasVideo: action.value[1],\n                hasAudio: user.hasAudio\n              } as RemoteUIKitUser\n            else return user\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'remote-user-mute-audio':\n      if (actionTypeGuard(action, action.type)) {\n        stateUpdate = {\n          min: state.min.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasAudio: action.value[1],\n                hasVideo: user.hasVideo\n              } as RemoteUIKitUser\n            else return user\n          }),\n          max: state.max.map((user: UIKitUser) => {\n            if (user.uid === action.value[0].uid)\n              return {\n                uid: user.uid,\n                hasAudio: action.value[1],\n                hasVideo: user.hasVideo\n              } as RemoteUIKitUser\n            else return user\n          }),\n          isScreensharing: state.isScreensharing\n        }\n      }\n      break\n    case 'leave-channel':\n      stateUpdate = initState\n      break\n    case 'ActiveSpeaker':\n      if (actionTypeGuard(action, action.type)) {\n        if (state.max[0].uid === action.value[0]) {\n          stateUpdate = { ...state }\n        } else {\n          stateUpdate = {\n            max: [\n              state.min.find(\n                (user) => user.uid === action.value[0]\n              ) as UIKitUser\n            ],\n            min: [\n              ...state.min.filter(\n                (user: UIKitUser) => user.uid !== action.value[0]\n              ),\n              state.max[0]\n            ],\n            isScreensharing: state.isScreensharing\n          }\n        }\n      }\n      break\n  }\n\n  console.log('!state-update', { ...state, ...stateUpdate }, stateUpdate)\n  return { ...state, ...stateUpdate }\n}\n\nexport default reducer\n","import AgoraRTC, { ILocalVideoTrack, UID } from 'agora-rtc-react'\n\nconst startScreenshare = async (\n  appId: string,\n  channel: string,\n  track: ILocalVideoTrack,\n  screenshareToken?: string | null,\n  screenshareUid?: number,\n  tokenUrl?: string,\n  enableDualStream?: boolean\n) => {\n  const screenClient = AgoraRTC.createClient({\n    mode: 'live',\n    role: 'host',\n    codec: 'vp8'\n  })\n  let returnedUid: UID = 0\n\n  const uid = screenshareUid || 1 // 1 is default\n\n  let localVideoTrackHasPublished = false\n\n  async function init() {\n    try {\n      console.log(screenClient)\n      if (tokenUrl) {\n        screenClient.on('token-privilege-will-expire', async () => {\n          console.log('token will expire')\n          const res = await fetch(\n            tokenUrl + '/rtc/' + channel + '/publisher/uid/' + uid + '/'\n          )\n          const data = await res.json()\n          const token = data.rtcToken\n          screenClient.renewToken(token)\n        })\n\n        screenClient.on('token-privilege-did-expire', async () => {\n          const res = await fetch(\n            tokenUrl + '/rtc/' + channel + '/publisher/uid/' + uid + '/'\n          )\n          const data = await res.json()\n          const token = data.rtcToken\n          screenClient.renewToken(token)\n        })\n      }\n\n      track.on('track-ended', () => {\n        screenClient.leave()\n        screenClient.removeAllListeners()\n      })\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  async function join(): Promise<void> {\n    screenClient.setClientRole('host')\n\n    if (tokenUrl) {\n      try {\n        const res = await fetch(\n          tokenUrl + '/rtc/' + channel + '/publisher/uid/' + uid + '/'\n        )\n        const data = await res.json()\n        const token = data.rtcToken\n        returnedUid = await screenClient.join(appId, channel, token, uid)\n      } catch (e) {\n        console.log(e)\n      }\n    } else {\n      returnedUid = await screenClient.join(\n        appId,\n        channel,\n        screenshareToken || null,\n        uid || 0\n      )\n    }\n  }\n\n  async function publish() {\n    if (enableDualStream) {\n      await screenClient.enableDualStream()\n    }\n    if (track.enabled) {\n      if (!localVideoTrackHasPublished) {\n        await screenClient.publish([track]).then(() => {\n          localVideoTrackHasPublished = true\n        })\n      }\n    }\n  }\n\n  const stop = async () => {\n    try {\n      track.close()\n      await screenClient.leave()\n      screenClient.removeAllListeners()\n    } catch (e) {\n      console.log(e)\n    }\n  }\n\n  stopScreenshare = stop\n\n  await init()\n  await join()\n  await publish()\n  if (returnedUid) console.log(returnedUid)\n}\n\nlet stopScreenshare = () => {}\n\nexport { startScreenshare, stopScreenshare }\n","import React, {\n  useState,\n  useEffect,\n  useContext,\n  useRef,\n  useReducer,\n  PropsWithChildren\n} from 'react'\nimport { RtcProvider } from './RtcContext'\nimport PropsContext, {\n  RtcPropsInterface,\n  UIKitUser,\n  mediaStore,\n  layout,\n  CallbacksInterface\n} from './PropsContext'\nimport { MaxUidProvider } from './MaxUidContext'\nimport AgoraRTC, { createClient, ILocalVideoTrack, UID } from 'agora-rtc-react'\nimport { MinUidProvider } from './MinUidContext'\nimport TracksContext from './TracksContext'\nimport reducer, { initState } from './Reducer'\nimport {\n  startScreenshare,\n  stopScreenshare\n} from './Controls/Local/screenshareFunctions'\n\nconst useClient = createClient({ codec: 'vp8', mode: 'live' }) // pass in another client if use h264\n\n/**\n * React component that contains the RTC logic. It manages the user state and provides it the children components by wrapping them with context providers.\n */\nconst RtcConfigure: React.FC<PropsWithChildren<Partial<RtcPropsInterface>>> = (\n  props\n) => {\n  const uid = useRef<UID>()\n  const screenTrack = useRef<ILocalVideoTrack>()\n  const isScreensharingRef = useRef<boolean>(false)\n  const { localVideoTrack, localAudioTrack } = useContext(TracksContext)\n  const { callbacks, rtcProps } = useContext(PropsContext)\n  const [ready, setReady] = useState<boolean>(false)\n  const [channelJoined, setChannelJoined] = useState<boolean>(false)\n  let joinRes: ((arg0: boolean) => void) | null = null // Resolve for canJoin -> to set canJoin to true\n  const canJoin = useRef(\n    new Promise<boolean | void>((resolve, reject) => {\n      joinRes = resolve\n      console.log(reject)\n    })\n  )\n\n  let client = useClient()\n  if (rtcProps.customRtcClient) {\n    // if customRtcClient prop is set then use custom client\n    client.removeAllListeners()\n    client = rtcProps.customRtcClient\n  }\n\n  let localVideoTrackHasPublished = false\n  let localAudioTrackHasPublished = false\n\n  const mediaStore = useRef<mediaStore>({})\n\n  let { callActive } = props\n  if (callActive === undefined) {\n    callActive = true\n  }\n\n  type stateType = {\n    max: UIKitUser[]\n    min: UIKitUser[]\n  }\n  const [uidState, dispatch] = useReducer<React.Reducer<stateType, any>>(\n    reducer,\n    initState\n  )\n\n  // init rtcEngine\n  useEffect(() => {\n    async function init() {\n      try {\n        console.log(client)\n        client.on('user-joined', async (...args) => {\n          const [remoteUser] = args\n          if (\n            (remoteUser.uid === props.screenshareUid &&\n              isScreensharingRef.current) ||\n            (remoteUser.uid === 1 && isScreensharingRef.current)\n          ) {\n          } else {\n            mediaStore.current[remoteUser.uid] = {}\n          }\n          dispatch({\n            type: 'user-joined',\n            value: args\n          })\n        })\n\n        client.on('user-published', async (...args) => {\n          // Get current peer IDs\n          const [remoteUser, mediaType] = args\n          console.log('user-published', remoteUser.uid)\n          if (\n            (remoteUser.uid === props.screenshareUid &&\n              isScreensharingRef.current) ||\n            (remoteUser.uid === 1 && isScreensharingRef.current)\n          ) {\n            dispatch({\n              type: 'user-published',\n              value: args\n            })\n          } else {\n            client\n              .subscribe(remoteUser, mediaType)\n              .then((_e) => {\n                mediaStore.current[remoteUser.uid][mediaType + 'Track'] =\n                  remoteUser[mediaType + 'Track']\n                if (mediaType === 'audio') {\n                  // eslint-disable-next-line no-unused-expressions\n                  remoteUser.audioTrack?.play()\n                } else {\n                  if (rtcProps.enableDualStream && rtcProps.dualStreamMode) {\n                    client.setStreamFallbackOption(\n                      remoteUser.uid,\n                      rtcProps.dualStreamMode\n                    )\n                  }\n                }\n                dispatch({\n                  type: 'user-published',\n                  value: args\n                })\n              })\n              .catch((e) => console.log(e))\n          }\n        })\n\n        client.on('user-unpublished', async (...args) => {\n          const [remoteUser, mediaType] = args\n          console.log('user-unpublished', remoteUser.uid)\n          if (mediaType === 'audio') {\n            // eslint-disable-next-line no-unused-expressions\n            remoteUser.audioTrack?.stop()\n          }\n          dispatch({\n            type: 'user-unpublished',\n            value: args\n          })\n          // }\n        })\n\n        client.on('connection-state-change', async (...args) => {\n          const [curState, prevState, reason] = args\n          console.log('connection', prevState, curState, reason)\n          if (curState === 'CONNECTED') {\n            setChannelJoined(true)\n          } else if (curState === 'DISCONNECTED') {\n            try {\n              stopScreenshare()\n              isScreensharingRef.current = false\n            } catch (e) {\n              console.log('stopscreenshare', e)\n            }\n            dispatch({ type: 'leave-channel', value: null })\n          } else {\n            setChannelJoined(false)\n          }\n        })\n\n        client.on('user-left', (...args) => {\n          dispatch({\n            type: 'user-left',\n            value: args\n          })\n        })\n\n        if (rtcProps.tokenUrl) {\n          const { tokenUrl, channel, uid } = rtcProps\n          client.on('token-privilege-will-expire', async () => {\n            console.log('token will expire')\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (uid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            client.renewToken(token)\n          })\n\n          client.on('token-privilege-did-expire', async () => {\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (uid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            client.renewToken(token)\n          })\n        }\n\n        if (callbacks) {\n          const events: [keyof CallbacksInterface] = Object.keys(\n            callbacks\n          ) as any\n          // !!!! fix type, validate event\n          events.map((e) => {\n            try {\n              client.on(e, (...args: any[]) => {\n                // eslint-disable-next-line prefer-spread\n                ;(callbacks[e] as Function).apply(null, args)\n              })\n            } catch (e) {\n              console.log(e)\n            }\n          })\n        }\n        ;(joinRes as (arg0: boolean) => void)(true)\n        setReady(true)\n      } catch (e) {\n        console.log('!!!', e)\n      }\n    }\n\n    if (joinRes) {\n      init()\n      return () => {\n        try {\n          client.removeAllListeners()\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    } else return () => {}\n  }, [rtcProps.appId]) //, ready])\n\n  // Dynamically switches channel when channel prop changes\n  useEffect(() => {\n    let ignore = false\n    async function join(): Promise<void> {\n      await canJoin.current\n      const { tokenUrl, channel, uid: userUid, appId, token } = rtcProps\n      if (client && !ignore) {\n        if (rtcProps.role === 'audience') {\n          client.setClientRole(rtcProps.role)\n        } else {\n          client.setClientRole('host')\n        }\n        if (tokenUrl) {\n          try {\n            const res = await fetch(\n              tokenUrl +\n                '/rtc/' +\n                channel +\n                '/publisher/uid/' +\n                (userUid || 0) +\n                '/'\n            )\n            const data = await res.json()\n            const token = data.rtcToken\n            uid.current = await client.join(appId, channel, token, userUid || 0)\n          } catch (e) {\n            console.log(e)\n          }\n        } else {\n          uid.current = await client.join(\n            appId,\n            channel,\n            token || null,\n            userUid || 0\n          )\n        }\n        // console.log('!uid: ', uid.current)\n      } else {\n        console.error('trying to join before RTC Engine was initialized')\n      }\n    }\n    if (callActive) {\n      join()\n      console.log('Attempted join: ', rtcProps.channel)\n    } else {\n      console.log('In precall - waiting to join')\n    }\n    return (): void => {\n      ignore = true\n      if (callActive) {\n        console.log('Leaving channel')\n        try {\n          stopScreenshare()\n          isScreensharingRef.current = false\n        } catch (e) {\n          console.log(e)\n        }\n        canJoin.current = client\n          .leave()\n          .catch((err: unknown) => console.log(err))\n      }\n    }\n  }, [rtcProps.channel, rtcProps.uid, callActive, rtcProps.tokenUrl])\n\n  // publish local stream\n  useEffect(() => {\n    async function publish() {\n      if (rtcProps.enableDualStream) {\n        await client.enableDualStream()\n      }\n      // handle publish fail if track is not enabled\n      if (localAudioTrack?.enabled && channelJoined) {\n        if (!localAudioTrackHasPublished) {\n          await client.publish([localAudioTrack]).then(() => {\n            localAudioTrackHasPublished = true\n          })\n        }\n      }\n      if (localVideoTrack?.enabled && channelJoined) {\n        if (!localVideoTrackHasPublished) {\n          await client.publish([localVideoTrack]).then(() => {\n            localVideoTrackHasPublished = true\n          })\n        }\n      }\n    }\n    console.log('Publish', localVideoTrack, localAudioTrack, callActive)\n    if (callActive) {\n      publish()\n    }\n  }, [\n    callActive,\n    localVideoTrack?.enabled,\n    localAudioTrack?.enabled,\n    channelJoined\n  ])\n\n  // update local state if tracks are not null\n  useEffect(() => {\n    if (localVideoTrack && localAudioTrack !== (null && undefined)) {\n      mediaStore.current[0] = {\n        audioTrack: localAudioTrack,\n        videoTrack: localVideoTrack\n      }\n      dispatch({\n        type: 'update-user-video',\n        value: [localAudioTrack, localVideoTrack]\n      })\n    }\n  }, [rtcProps.channel, channelJoined])\n\n  // renew token if token is updated\n  useEffect(() => {\n    if (channelJoined && rtcProps.token) {\n      client\n        .renewToken(rtcProps.token)\n        .then((e) => console.log('renewed token', e))\n    }\n  }, [rtcProps.token, channelJoined])\n\n  // set role if role is updated\n  useEffect(() => {\n    if (rtcProps.role) {\n      client\n        .setClientRole(rtcProps.role)\n        .then((e) => console.log('changed role', e))\n    }\n  }, [rtcProps.role, channelJoined])\n\n  // active speaker\n  useEffect(() => {\n    async function enableActiveSpeaker() {\n      if (rtcProps.activeSpeaker && rtcProps.layout !== layout.grid) {\n        client.on('volume-indicator', (volumes) => {\n          const highestvolumeObj = volumes.reduce(\n            (\n              highestVolume: {\n                level: number\n                uid: UID\n              },\n              volume\n            ) => {\n              if (highestVolume === null) {\n                return volume\n              } else {\n                if (volume.level > highestVolume.level) {\n                  return volume\n                }\n                return highestVolume\n              }\n            },\n            null\n          )\n          const activeSpeaker = highestvolumeObj\n            ? highestvolumeObj.uid\n            : undefined\n          const mapActiveSpeakerToZero =\n            activeSpeaker === uid.current ? 0 : activeSpeaker\n          if (activeSpeaker !== undefined) {\n            dispatch({\n              type: 'ActiveSpeaker',\n              value: [mapActiveSpeakerToZero]\n            })\n          }\n        })\n        await client.enableAudioVolumeIndicator()\n      }\n    }\n    if (callActive) {\n      enableActiveSpeaker()\n    }\n    return () => {\n      client.removeAllListeners('volume-indicator')\n    }\n  }, [rtcProps.activeSpeaker, rtcProps.layout])\n\n  const toggleScreensharing = async () => {\n    const start = async () => {\n      dispatch({\n        type: 'Screensharing',\n        value: [true]\n      })\n      screenTrack.current = await AgoraRTC.createScreenVideoTrack({}, 'disable')\n      const uid = rtcProps.screenshareUid || 1 // 1 is default\n      mediaStore.current[uid] = { videoTrack: screenTrack.current }\n      screenTrack.current.on('track-ended', () => {\n        isScreensharingRef.current = false\n        dispatch({\n          type: 'Screensharing',\n          value: [false]\n        })\n      })\n      isScreensharingRef.current = true\n      await startScreenshare(\n        rtcProps.appId,\n        rtcProps.channel,\n        screenTrack.current,\n        rtcProps.screenshareToken,\n        rtcProps.screenshareUid,\n        rtcProps.tokenUrl,\n        rtcProps.enableDualStream\n      )\n    }\n\n    const stop = () => {\n      stopScreenshare()\n      isScreensharingRef.current = false\n    }\n\n    if (isScreensharingRef.current) {\n      stop()\n    } else {\n      start()\n    }\n  }\n\n  return (\n    <RtcProvider\n      value={{\n        client,\n        mediaStore: mediaStore.current,\n        localVideoTrack,\n        localAudioTrack,\n        dispatch,\n        localUid: uid,\n        channelJoined,\n        toggleScreensharing: toggleScreensharing,\n        isScreensharing: isScreensharingRef.current\n      }}\n    >\n      <MaxUidProvider value={uidState.max}>\n        <MinUidProvider value={uidState.min}>\n          {/* <MinUidProvider value={uidState.min}> */}\n          {ready ? props.children : null}\n        </MinUidProvider>\n      </MaxUidProvider>\n    </RtcProvider>\n  )\n}\n\nexport default RtcConfigure\n","import React from 'react'\n\nconst icons = {\n  videocam: (\n    <React.Fragment>\n      <polygon points='23 7 16 12 23 17 23 7' />\n      <rect x='1' y='5' width='15' height='14' rx='2' ry='2' />\n    </React.Fragment>\n  ),\n  videocamOff: (\n    <React.Fragment>\n      <path d='M16 16v1a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2m5.66 0H14a2 2 0 0 1 2 2v3.34l1 1L23 7v10' />\n      <line x1='1' y1='1' x2='23' y2='23' />\n    </React.Fragment>\n  ),\n  remoteSwap: (\n    <React.Fragment>\n      <polyline points='15 3 21 3 21 9' />\n      <polyline points='9 21 3 21 3 15' />\n      <line x1='21' y1='3' x2='14' y2='10' />\n      <line x1='3' y1='21' x2='10' y2='14' />\n    </React.Fragment>\n  ),\n  callEnd: (\n    <React.Fragment>\n      <path d='M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91' />\n      <line x1='23' y1='1' x2='1' y2='23' />\n    </React.Fragment>\n  ),\n  mic: (\n    <React.Fragment>\n      <path d='M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z' />\n      <path d='M19 10v2a7 7 0 0 1-14 0v-2' />\n      <line x1='12' y1='19' x2='12' y2='23' />\n      <line x1='8' y1='23' x2='16' y2='23' />\n    </React.Fragment>\n  ),\n  micOff: (\n    <React.Fragment>\n      <line x1='1' y1='1' x2='23' y2='23' />\n      <path d='M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6' />\n      <path d='M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23' />\n      <line x1='12' y1='19' x2='12' y2='23' />\n      <line x1='8' y1='23' x2='16' y2='23' />\n    </React.Fragment>\n  ),\n  screen: (\n    <React.Fragment>\n      <rect x='2' y='3' width='20' height='14' rx='2' ry='2' />\n      <line x1='8' y1='21' x2='16' y2='21' />\n      <line x1='12' y1='17' x2='12' y2='21' />\n    </React.Fragment>\n  ),\n  stop: (\n    <React.Fragment>\n      <line x1='18' y1='6' x2='6' y2='18' />\n      <line x1='6' y1='6' x2='18' y2='18' />\n    </React.Fragment>\n  )\n}\n\nexport default icons\n","import React, { useContext } from 'react'\nimport PropsContext from '../PropsContext'\nimport Icons from './Icons'\ninterface BtnTemplateInterface {\n  name: string\n  color?: string\n  onClick: () => void\n  disabled?: boolean\n  style?: React.CSSProperties\n}\n\nconst BtnTemplate = (props: BtnTemplateInterface) => {\n  const { onClick, name, disabled, style } = props\n  const { styleProps } = useContext(PropsContext)\n  const { theme, BtnTemplateStyles, iconSize, customIcon } = styleProps || {}\n\n  return (\n    <div\n      style={{\n        ...{\n          width: 35,\n          height: 35,\n          borderRadius: '100%',\n          borderWidth: 2,\n          borderStyle: 'solid',\n          borderColor: '#fff',\n          backgroundColor: 'rgba(0,80,180,0.2)',\n          alignItems: 'center',\n          justifyContent: 'center',\n          display: 'flex',\n          cursor: disabled ? 'auto' : 'pointer',\n          margin: 4\n        },\n        ...BtnTemplateStyles,\n        ...style\n      }}\n      onClick={onClick}\n    >\n      {customIcon ? (\n        <img src={customIcon[name]} alt={name} />\n      ) : (\n        <svg\n          style={{\n            width: iconSize || 24,\n            height: iconSize || 24\n          }}\n          xmlns='http://www.w3.org/2000/svg'\n          width='24'\n          height='24'\n          viewBox='0 0 24 24'\n          fill='none'\n          opacity={disabled ? '0.5' : '1'}\n          stroke={theme || '#fff'}\n          strokeWidth='2'\n          strokeLinecap='round'\n          strokeLinejoin='round'\n          // className='feather feather-video'\n        >\n          {Icons[name]}\n        </svg>\n      )}\n    </div>\n  )\n}\n\nexport default BtnTemplate\n","import React, { useContext } from 'react'\nimport PropsContext from '../../PropsContext'\n// import RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\n\nfunction EndCall() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { endCall } = localBtnStyles || {}\n  // const { dispatch } = useContext(RtcContext)\n\n  return (\n    <BtnTemplate\n      style={endCall || { backgroundColor: '#ef5588', borderColor: '#f00' }}\n      name='callEnd'\n      onClick={() => callbacks?.EndCall && callbacks.EndCall()}\n    />\n  )\n}\n\nexport default EndCall\n","import React, { useContext, createContext, PropsWithChildren } from 'react'\nimport MaxUidContext from './MaxUidContext'\nimport MinUidContext from './MinUidContext'\nimport { LocalUIKitUser } from './PropsContext'\n\nexport const LocalContext = createContext<LocalUIKitUser>({} as LocalUIKitUser)\nexport const LocalProvider = LocalContext.Provider\nexport const LocalConsumer = LocalContext.Consumer\n\ninterface LocalUserContextInterface {\n  children: React.ReactNode\n}\n/**\n * React context that exposes the {@link LocalUIKitUser} data object\n */\nconst LocalUserContext: React.FC<\n  PropsWithChildren<LocalUserContextInterface>\n> = (props) => {\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n\n  let localUser: LocalUIKitUser\n  if (max[0].uid === 0) {\n    localUser = max[0] as LocalUIKitUser\n  } else {\n    localUser = min.find((u) => u.uid === 0) as LocalUIKitUser\n  }\n  return (\n    <LocalContext.Provider value={localUser}>\n      {props.children}\n    </LocalContext.Provider>\n  )\n}\n\nexport default LocalUserContext\n","import { DispatchType } from '../../RtcContext'\nimport { LocalUIKitUser, ToggleState } from '../../PropsContext'\nimport { ILocalAudioTrack } from 'agora-rtc-react'\nimport { CallbacksInterface } from '../..'\n\nexport default async (\n  user: LocalUIKitUser,\n  dispatch: DispatchType,\n  localAudioTrack: ILocalAudioTrack,\n  callbacks?: Partial<CallbacksInterface>\n) => {\n  // console.log('!mute audio', user)\n  if (user.uid === 0) {\n    const localState = user.hasAudio\n    if (\n      localState === ToggleState.enabled ||\n      localState === ToggleState.disabled\n    ) {\n      // Disable UI\n      let newState =\n        localState === ToggleState.enabled\n          ? ToggleState.disabling\n          : ToggleState.enabling\n      dispatch({\n        type: 'local-user-mute-audio',\n        value: [newState]\n      })\n      callbacks &&\n        callbacks['local-user-mute-audio'] &&\n        callbacks['local-user-mute-audio'](newState)\n      try {\n        await localAudioTrack?.setEnabled(localState !== ToggleState.enabled)\n        // Enable UI\n        newState =\n          localState === ToggleState.enabled\n            ? ToggleState.disabled\n            : ToggleState.enabled\n        callbacks &&\n          callbacks['local-user-mute-audio'] &&\n          callbacks['local-user-mute-audio'](newState)\n        dispatch({\n          type: 'local-user-mute-audio',\n          value: [\n            localState === ToggleState.enabled\n              ? ToggleState.disabled\n              : ToggleState.enabled\n          ]\n        })\n      } catch (e) {\n        dispatch({\n          type: 'local-user-mute-audio',\n          value: [localState]\n        })\n      }\n    }\n  }\n}\n","import React, { useContext } from 'react'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport { LocalContext } from '../../LocalUserContext'\nimport PropsContext, { ToggleState } from '../../PropsContext'\nimport muteAudio from './muteAudio'\n\nfunction LocalAudioMute() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { muteLocalAudio } = localBtnStyles || {}\n  const { dispatch, localAudioTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={muteLocalAudio}\n        name={local.hasAudio === ToggleState.enabled ? 'mic' : 'micOff'}\n        onClick={() =>\n          localAudioTrack &&\n          muteAudio(local, dispatch, localAudioTrack, callbacks)\n        }\n      />\n    </div>\n  )\n}\n\nexport default LocalAudioMute\n","import React, { useContext } from 'react'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext from '../../PropsContext'\n\nfunction Screenshare() {\n  const { styleProps } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { screenshare } = localBtnStyles || {}\n  const { toggleScreensharing, isScreensharing } = useContext(RtcContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={screenshare}\n        name={isScreensharing ? 'stop' : 'screen'}\n        onClick={() => toggleScreensharing()}\n      />\n    </div>\n  )\n}\n\nexport default Screenshare\n","import { DispatchType } from '../../RtcContext'\nimport {\n  CallbacksInterface,\n  LocalUIKitUser,\n  ToggleState\n} from '../../PropsContext'\nimport { ILocalVideoTrack } from 'agora-rtc-react'\n\nexport default async (\n  user: LocalUIKitUser,\n  dispatch: DispatchType,\n  localVideoTrack: ILocalVideoTrack,\n  callbacks?: Partial<CallbacksInterface>\n) => {\n  if (user.uid === 0) {\n    const localState = user.hasVideo\n    if (\n      localState === ToggleState.enabled ||\n      localState === ToggleState.disabled\n    ) {\n      // Disable UI\n      let newState =\n        localState === ToggleState.enabled\n          ? ToggleState.disabling\n          : ToggleState.enabling\n      dispatch({\n        type: 'local-user-mute-video',\n        value: [newState]\n      })\n      callbacks &&\n        callbacks['local-user-mute-video'] &&\n        callbacks['local-user-mute-video'](newState)\n      try {\n        await localVideoTrack?.setEnabled(localState !== ToggleState.enabled)\n        // Enable UI\n        newState =\n          localState === ToggleState.enabled\n            ? ToggleState.disabled\n            : ToggleState.enabled\n        callbacks &&\n          callbacks['local-user-mute-video'] &&\n          callbacks['local-user-mute-video'](newState)\n        dispatch({\n          type: 'local-user-mute-video',\n          value: [newState]\n        })\n      } catch (e) {\n        dispatch({\n          type: 'local-user-mute-video',\n          value: [localState]\n        })\n      }\n    }\n  }\n}\n","import React, { useContext } from 'react'\nimport RtcContext from '../../RtcContext'\nimport BtnTemplate from '../BtnTemplate'\nimport { LocalContext } from '../../LocalUserContext'\nimport PropsContext, { ToggleState } from '../../PropsContext'\nimport muteVideo from './muteVideo'\n\nfunction LocalVideoMute() {\n  const { styleProps, callbacks } = useContext(PropsContext)\n  const { localBtnStyles } = styleProps || {}\n  const { muteLocalVideo } = localBtnStyles || {}\n  const { dispatch, localVideoTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return (\n    <div>\n      <BtnTemplate\n        style={muteLocalVideo}\n        name={\n          local.hasVideo === ToggleState.enabled ? 'videocam' : 'videocamOff'\n        }\n        onClick={() =>\n          localVideoTrack &&\n          muteVideo(local, dispatch, localVideoTrack, callbacks)\n        }\n      />\n    </div>\n  )\n}\n\nexport default LocalVideoMute\n","import React, { useContext } from 'react'\nimport EndCall from './Local/EndCall'\nimport LocalAudioMute from './Local/LocalAudioMute'\nimport Screenshare from './Local/Screenshare'\nimport LocalVideoMute from './Local/LocalVideoMute'\nimport PropsContext from '../PropsContext'\n\nfunction LocalControls() {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { localBtnContainer } = styleProps || {}\n\n  return (\n    <div\n      style={{\n        ...{\n          backgroundColor: '#007bff',\n          width: '100%',\n          height: 70,\n          zIndex: 10,\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-evenly',\n          alignItems: 'center'\n        },\n        ...localBtnContainer\n      }}\n    >\n      {rtcProps.role !== 'audience' && <LocalVideoMute />}\n      {rtcProps.role !== 'audience' && <LocalAudioMute />}\n      {rtcProps.role !== 'audience' && rtcProps.enableScreensharing && (\n        <Screenshare />\n      )}\n      <EndCall />\n    </div>\n  )\n}\n\nexport default LocalControls\n","import { UID } from 'agora-rtc-react'\nimport { RtmClient, RtmEvents } from 'agora-rtm-react'\nimport { createContext } from 'react'\n\n/**\n * Callbacks to pass to RTM events\n */\nexport type rtmCallbacks = {\n  channel?: Partial<RtmEvents.RtmChannelEvents>\n  client?: Partial<RtmEvents.RtmClientEvents>\n}\n\nexport enum rtmStatusEnum {\n  // Initialisation failed\n  initFailed,\n  // Login has not been attempted\n  offline,\n  // RTM is initialising, process is not yet complete\n  initialising,\n  // Currently attempting to log in\n  loggingIn,\n  // RTM has logged in\n  loggedIn,\n  // RTM is logged in, and connected to the current channel\n  connected,\n  // RTM Login Failed\n  loginFailed\n}\n\nexport type messageType = 'UserData' | 'MuteRequest'\n\nexport type messageObject = userData | muteRequest | genericAction\n\nexport enum clientRoleRaw {\n  broadcaster,\n  audience\n}\n\nexport enum mutingDevice {\n  camera,\n  microphone\n}\n\nexport type genericAction = {\n  messageType: 'RtmDataRequest'\n  type: 'ping' | 'pong' | 'userData'\n}\n\nexport type muteRequest = {\n  messageType: 'MuteRequest'\n  rtcId: UID\n  mute: boolean\n  device: mutingDevice\n  isForceful: boolean\n}\n\nexport type userData = {\n  messageType: 'UserData'\n  rtmId: string\n  rtcId: UID\n  username?: string\n  role: clientRoleRaw\n  uikit: {\n    platform: string\n    framework: string\n    version: string\n  }\n  agora: {\n    rtm: string\n    rtc: string\n  }\n}\n\nexport enum popUpStateEnum {\n  closed,\n  muteMic,\n  muteCamera,\n  unmuteMic,\n  unmuteCamera\n}\n/**\n * Interface for RTM Context\n */\ninterface rtmContext {\n  /**\n   * rtm connection status\n   */\n  rtmStatus: rtmStatusEnum\n  /**\n   * send message to everyone in the channel\n   */\n  sendChannelMessage: (msg: messageObject) => void\n  /**\n   * send message to a specific user\n   */\n  sendPeerMessage: (msg: messageObject, uid: string) => void\n  /**\n   * RTM Client instance\n   */\n  rtmClient: RtmClient\n  /**\n   * map with userdata for each rtc uid in the channel\n   */\n  userDataMap: Object\n  /**\n   * map with rtm uid for each rtc uid in the channel\n   */\n  uidMap: Object\n  /**\n   * Send a mute request\n   */\n  sendMuteRequest: (device: mutingDevice, rtcId: UID, mute: boolean) => void\n  /**\n   * RTM usernames\n   */\n  usernames: {}\n  /**\n   * state to display pop up on remote mute request\n   */\n  popUpState: popUpStateEnum\n  /**\n   * set state to hide pop up\n   */\n  setPopUpState: React.Dispatch<React.SetStateAction<popUpStateEnum>>\n}\n/**\n * Context to access RTM data. It's setup by {@link RtmConfigure}.\n */\nconst RtmContext = createContext(null as unknown as rtmContext)\n\nexport const RtmProvider = RtmContext.Provider\nexport const RtmConsumer = RtmContext.Consumer\nexport default RtmContext\n","import React, { useContext } from 'react'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext, { remoteTrackState, UIKitUser } from '../../PropsContext'\nimport RtmContext, { mutingDevice } from '../../RtmContext'\n\nfunction RemoteVideoMute(props: { UIKitUser: UIKitUser }) {\n  const { styleProps } = useContext(PropsContext)\n  const { sendMuteRequest, uidMap } = useContext(RtmContext)\n  const { remoteBtnStyles } = styleProps || {}\n  const { muteRemoteVideo } = remoteBtnStyles || {}\n  const { UIKitUser } = props\n  const isMuted = UIKitUser.hasVideo === remoteTrackState.no\n\n  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? (\n    <div>\n      <BtnTemplate\n        name={\n          UIKitUser.hasVideo === remoteTrackState.subbed\n            ? 'videocam'\n            : 'videocamOff'\n        }\n        style={muteRemoteVideo}\n        onClick={() =>\n          sendMuteRequest(mutingDevice.camera, UIKitUser.uid, !isMuted)\n        }\n      />\n    </div>\n  ) : null\n}\n\nexport default RemoteVideoMute\n","import React, { useContext } from 'react'\nimport BtnTemplate from '../BtnTemplate'\nimport PropsContext, { remoteTrackState, UIKitUser } from '../../PropsContext'\nimport RtmContext, { mutingDevice } from '../../RtmContext'\n\nfunction RemoteAudioMute(props: { UIKitUser: UIKitUser }) {\n  const { styleProps } = useContext(PropsContext)\n  const { remoteBtnStyles } = styleProps || {}\n  const { sendMuteRequest, uidMap } = useContext(RtmContext)\n  const { muteRemoteAudio } = remoteBtnStyles || {}\n  const { UIKitUser } = props\n  const isMuted = UIKitUser.hasAudio === remoteTrackState.no\n\n  return UIKitUser.uid !== 0 && uidMap[UIKitUser.uid] ? (\n    <div>\n      <BtnTemplate\n        style={muteRemoteAudio}\n        name={UIKitUser.hasAudio === remoteTrackState.subbed ? 'mic' : 'micOff'}\n        onClick={() =>\n          sendMuteRequest(mutingDevice.microphone, UIKitUser.uid, !isMuted)\n        }\n      />\n    </div>\n  ) : null\n}\n\nexport default RemoteAudioMute\n","import React, { useContext } from 'react'\nimport RtcContext from './../RtcContext'\nimport BtnTemplate from './BtnTemplate'\nimport { UIKitUser } from './../PropsContext'\n\nfunction SwapUser(props: { UIKitUser: UIKitUser }) {\n  const { dispatch } = useContext(RtcContext)\n  const { UIKitUser } = props\n\n  return (\n    <div>\n      <BtnTemplate\n        name='remoteSwap'\n        onClick={() => dispatch({ type: 'user-swap', value: [UIKitUser] })}\n      />\n    </div>\n  )\n}\n\nexport default SwapUser\n","import React, { useContext } from 'react'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport PropsContext, { VideoPlaceholderProps } from './PropsContext'\nimport SwapUser from './Controls/SwapUser'\n/**\n * React component that is renderd when the video track is muted.\n */\nconst VideoPlaceholder = (props: VideoPlaceholderProps) => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { maxViewStyles, maxViewOverlayContainer } = styleProps || {}\n  const { user } = props\n  const { CustomVideoPlaceholder } = rtcProps\n\n  return !CustomVideoPlaceholder ? (\n    <div\n      key={user.uid}\n      style={{\n        ...style.max,\n        ...maxViewStyles\n      }}\n    >\n      <div style={style.imgContainer}>\n        <img\n          style={style.img}\n          src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItdXNlciI+PHBhdGggZD0iTTIwIDIxdi0yYTQgNCAwIDAgMC00LTRIOGE0IDQgMCAwIDAtNCA0djIiPjwvcGF0aD48Y2lyY2xlIGN4PSIxMiIgY3k9IjciIHI9IjQiPjwvY2lyY2xlPjwvc3ZnPg=='\n        />\n      </div>\n      {props.isShown && (\n        <div\n          style={{\n            ...style.btnContainer,\n            ...maxViewOverlayContainer\n          }}\n        >\n          {props.showButtons && (\n            <React.Fragment>\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n              {props.showSwap && <SwapUser UIKitUser={user} />}\n            </React.Fragment>\n          )}\n        </div>\n      )}\n    </div>\n  ) : (\n    CustomVideoPlaceholder && CustomVideoPlaceholder({ ...props }, null)\n  )\n}\n\nconst style = {\n  max: {\n    flex: 1,\n    display: 'flex',\n    backgroundColor: '#007bff33',\n    flexDirection: 'row',\n    position: 'relative'\n  } as React.CSSProperties,\n  imgContainer: {\n    flex: 10,\n    display: 'flex',\n    justifyContent: 'center'\n  },\n  img: {\n    width: 100,\n    height: 100,\n    position: 'absolute',\n    alignSelf: 'center',\n    justifySelf: 'center',\n    margin: 'auto',\n    display: 'flex'\n  } as React.CSSProperties,\n  btnContainer: {\n    position: 'absolute',\n    margin: 5,\n    flexDirection: 'column',\n    display: 'flex'\n  } as React.CSSProperties\n}\n\nexport default VideoPlaceholder\n","import React, { CSSProperties, useContext } from 'react'\nimport RtmContext from './RtmContext'\nimport PropsContext, { UIKitUser } from './PropsContext'\n\nconst Username = (props: { user: UIKitUser; style?: React.CSSProperties }) => {\n  const { usernames } = useContext(RtmContext)\n  const { rtmProps, styleProps } = useContext(PropsContext)\n  const { user } = props\n\n  return rtmProps?.displayUsername ? (\n    <p style={{ ...styles.username, ...styleProps?.usernameText }}>\n      {user.uid === 1 ? 'Screenshare' : usernames[user.uid]}\n    </p>\n  ) : (\n    <React.Fragment />\n  )\n}\n\nconst styles = {\n  username: {\n    position: 'absolute',\n    background: '#007bffaa',\n    padding: '2px 8px',\n    color: '#fff',\n    margin: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 90\n  } as CSSProperties\n}\n\nexport default Username\n","import React, { CSSProperties, useContext, useState } from 'react'\nimport RtcContext from './RtcContext'\nimport { AgoraVideoPlayer, IRemoteVideoTrack } from 'agora-rtc-react'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport PropsContext, { UIKitUser } from './PropsContext'\nimport VideoPlaceholder from './VideoPlaceholder'\nimport Username from './Username'\n/**\n * React component to display the user video in maximized view\n */\nconst MaxVideoView = (props: {\n  user: UIKitUser\n  style?: React.CSSProperties\n}) => {\n  const { mediaStore } = useContext(RtcContext)\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { maxViewStyles, videoMode, maxViewOverlayContainer } = styleProps || {}\n  const renderModeProp = videoMode?.max\n  const [isShown, setIsShown] = useState(false)\n  const { user } = props\n\n  return (\n    <div\n      style={{\n        ...styles.container,\n        ...props.style,\n        ...maxViewStyles\n      }}\n      onMouseEnter={() => setIsShown(true)}\n      onMouseLeave={() => setIsShown(false)}\n    >\n      {user.hasVideo === 1 ? (\n        // hasVideo is 1 if the local user has video enabled, or if remote user video is subbed\n        <div style={styles.videoContainer}>\n          {!rtcProps.disableRtm && <Username user={user} />}\n          <AgoraVideoPlayer\n            style={styles.videoplayer}\n            config={{\n              fit: renderModeProp || 'cover'\n            }}\n            videoTrack={mediaStore[user.uid].videoTrack as IRemoteVideoTrack}\n          />\n          {isShown && (\n            <div\n              style={{\n                ...styles.overlay,\n                ...maxViewOverlayContainer\n              }}\n            >\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n            </div>\n          )}\n        </div>\n      ) : (\n        <div style={styles.videoContainer}>\n          {!rtcProps.disableRtm && <Username user={user} />}\n          <VideoPlaceholder user={user} isShown={isShown} showButtons />\n        </div>\n      )}\n    </div>\n  )\n}\n\nconst styles = {\n  container: { display: 'flex', flex: 1 },\n  videoContainer: {\n    display: 'flex',\n    flex: 1,\n    position: 'relative'\n  } as CSSProperties,\n  videoplayer: {\n    width: '100%',\n    display: 'flex',\n    flex: 1\n  },\n  overlay: {\n    position: 'absolute',\n    margin: 5,\n    flexDirection: 'column',\n    display: 'flex'\n  } as CSSProperties,\n  username: {\n    position: 'absolute',\n    background: '#007bffaa',\n    padding: '2px 8px',\n    color: '#fff',\n    margin: 0,\n    bottom: 0,\n    right: 0,\n    zIndex: 90\n  } as CSSProperties\n}\n\nexport default MaxVideoView\n","import React, { useContext, useState } from 'react'\nimport RtcContext from './RtcContext'\nimport { AgoraVideoPlayer, IRemoteVideoTrack } from 'agora-rtc-react'\nimport RemoteVideoMute from './Controls/Remote/RemoteVideoMute'\nimport RemoteAudioMute from './Controls/Remote/RemoteAudioMute'\nimport SwapUser from './Controls/SwapUser'\nimport PropsContext, { UIKitUser } from './PropsContext'\nimport VideoPlaceholder from './VideoPlaceholder'\n\n/**\n * React context to expose user array displayed in the smaller view\n */\nconst MinVideoView = (props: { user: UIKitUser }) => {\n  const { mediaStore } = useContext(RtcContext)\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { minViewStyles, videoMode, minViewOverlayContainer } = styleProps || {}\n  const renderModeProp = videoMode?.min\n  const [isShown, setIsShown] = useState(false)\n  const { user } = props\n\n  return (\n    <div\n      style={{\n        ...{ display: 'flex', flex: 1 },\n        ...minViewStyles\n      }}\n      onMouseEnter={() => setIsShown(true)}\n      onMouseLeave={() => setIsShown(false)}\n    >\n      {user.hasVideo === 1 ? (\n        <div\n          style={{\n            ...{\n              display: 'flex',\n              flex: 1,\n              position: 'relative'\n            }\n          }}\n        >\n          <AgoraVideoPlayer\n            style={{ flex: 10, display: 'flex' }}\n            config={{\n              fit: renderModeProp !== undefined ? renderModeProp : 'cover'\n            }}\n            videoTrack={mediaStore[user.uid].videoTrack as IRemoteVideoTrack}\n          />\n          {isShown && (\n            <div\n              style={{\n                ...{\n                  margin: 4,\n                  position: 'absolute',\n                  flex: 1,\n                  display: 'flex',\n                  flexDirection: 'column'\n                },\n                ...minViewOverlayContainer\n              }}\n            >\n              {!rtcProps.disableRtm && <RemoteVideoMute UIKitUser={user} />}\n              {!rtcProps.disableRtm && <RemoteAudioMute UIKitUser={user} />}\n              <SwapUser UIKitUser={user} />\n            </div>\n          )}\n        </div>\n      ) : (\n        <VideoPlaceholder user={user} isShown={isShown} showButtons showSwap />\n      )}\n    </div>\n  )\n}\n\nexport default MinVideoView\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport { MinUidConsumer } from './MinUidContext'\nimport { MaxUidConsumer } from './MaxUidContext'\nimport MaxVideoView from './MaxVideoView'\nimport MinVideoView from './MinVideoView'\nimport PropsContext from './PropsContext'\nimport styles from './styles.module.css'\n\n/**\n * React Component to render the user videos in the pinned/spotlight layout\n */\nconst PinnedVideo: React.FC = () => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const {\n    minViewContainer,\n    pinnedVideoContainer,\n    maxViewContainer,\n    scrollViewContainer\n  } = styleProps || {}\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [width, setWidth] = useState(0)\n  const [height, setHeight] = useState(0)\n  const isLandscape = width > height\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (parentRef.current) {\n        setWidth(parentRef.current.offsetWidth)\n        setHeight(parentRef.current.offsetHeight)\n      }\n    }\n    window.addEventListener('resize', handleResize)\n    if (parentRef.current) {\n      setWidth(parentRef.current.offsetWidth)\n      setHeight(parentRef.current.offsetHeight)\n    }\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return (\n    <div\n      ref={parentRef}\n      style={{\n        ...{\n          display: 'flex',\n          flex: 1,\n          flexDirection: isLandscape ? 'row' : 'column-reverse',\n          overflow: 'hidden'\n        },\n        ...pinnedVideoContainer\n      }}\n    >\n      <div\n        style={{\n          ...{\n            display: 'flex',\n            flex: isLandscape ? 5 : 4\n          },\n          ...maxViewContainer\n        }}\n      >\n        <MaxUidConsumer>\n          {(maxUsers) =>\n            rtcProps.role === 'audience' && maxUsers[0].uid === 0 ? null : (\n              <MaxVideoView user={maxUsers[0]} />\n            )\n          }\n        </MaxUidConsumer>\n      </div>\n      <div\n        className={styles.scrollbar}\n        style={{\n          ...{\n            overflowY: isLandscape ? 'scroll' : 'hidden',\n            overflowX: !isLandscape ? 'scroll' : 'hidden',\n            display: 'flex',\n            flex: 1,\n            flexDirection: isLandscape ? 'column' : 'row'\n          },\n          ...scrollViewContainer\n        }}\n      >\n        <MinUidConsumer>\n          {(minUsers) =>\n            minUsers.map((user) =>\n              rtcProps.role === 'audience' && user.uid === 0 ? null : (\n                <div\n                  style={{\n                    ...{\n                      minHeight: isLandscape ? '35vh' : '99%',\n                      minWidth: isLandscape ? '99%' : '40vw',\n                      margin: 2,\n                      display: 'flex'\n                    },\n                    ...minViewContainer\n                  }}\n                  key={user.uid}\n                >\n                  <MinVideoView user={user} />\n                </div>\n              )\n            )\n          }\n        </MinUidConsumer>\n      </div>\n    </div>\n  )\n}\n\nexport default PinnedVideo\n","import React, { useContext, useEffect, useRef, useState } from 'react'\nimport MinUidContext from './MinUidContext'\nimport MaxUidContext from './MaxUidContext'\nimport PropsContext from './PropsContext'\nimport MaxVideoView from './MaxVideoView'\n\n/**\n * React Component to render the user videos in a grid\n */\nconst GridVideo: React.FC = () => {\n  const { styleProps, rtcProps } = useContext(PropsContext)\n  const { gridVideoCells, gridVideoContainer } = styleProps || {}\n  const max = useContext(MaxUidContext)\n  const min = useContext(MinUidContext)\n  const users =\n    rtcProps.role === 'audience'\n      ? [...max, ...min].filter((user) => user.uid !== 0)\n      : [...max, ...min]\n  const parentRef = useRef<HTMLDivElement>(null)\n  const [width, setWidth] = useState(window.innerWidth)\n  const [height, setHeight] = useState(window.innerHeight)\n  const isLandscape = width > height\n  const unit = 'minmax(0, 1fr) '\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (parentRef.current) {\n        setWidth(parentRef.current.offsetWidth)\n        setHeight(parentRef.current.offsetHeight)\n      }\n    }\n    window.addEventListener('resize', handleResize)\n    if (parentRef.current) {\n      setWidth(parentRef.current.offsetWidth)\n      setHeight(parentRef.current.offsetHeight)\n    }\n    return () => {\n      window.removeEventListener('resize', handleResize)\n    }\n  }, [])\n\n  return (\n    <div\n      ref={parentRef}\n      style={{\n        ...{\n          width: '100%',\n          height: '100%',\n          display: 'grid',\n          gridTemplateColumns: isLandscape\n            ? users.length > 9\n              ? unit.repeat(4)\n              : users.length > 4\n              ? unit.repeat(3)\n              : users.length > 1\n              ? unit.repeat(2)\n              : unit\n            : users.length > 8\n            ? unit.repeat(3)\n            : users.length > 2\n            ? unit.repeat(2)\n            : unit\n        },\n        ...gridVideoContainer\n      }}\n    >\n      {users.map((user) => (\n        <MaxVideoView\n          user={user}\n          style={{ ...{ height: '100%', width: '100%' }, ...gridVideoCells }}\n          key={user.uid}\n        />\n      ))}\n    </div>\n  )\n}\n\nexport default GridVideo\n","import React, { useState, useEffect, useRef, PropsWithChildren } from 'react'\nimport { RtcPropsInterface, mediaStore } from './PropsContext'\nimport {\n  ILocalVideoTrack,\n  ILocalAudioTrack,\n  createMicrophoneAndCameraTracks\n} from 'agora-rtc-react'\nimport { TracksProvider } from './TracksContext'\n\nconst useTracks = createMicrophoneAndCameraTracks(\n  { encoderConfig: {} },\n  { encoderConfig: {} }\n)\n/**\n * React component that create local camera and microphone tracks and assigns them to the child components\n */\nconst TracksConfigure: React.FC<PropsWithChildren<Partial<RtcPropsInterface>>> = (props) => {\n  const [ready, setReady] = useState<boolean>(false)\n  const [localVideoTrack, setLocalVideoTrack] =\n    useState<ILocalVideoTrack | null>(null)\n  const [localAudioTrack, setLocalAudioTrack] =\n    useState<ILocalAudioTrack | null>(null)\n  const { ready: trackReady, tracks, error } = useTracks()\n  const mediaStore = useRef<mediaStore>({})\n\n  useEffect(() => {\n    if (tracks !== null) {\n      setLocalAudioTrack(tracks[0])\n      setLocalVideoTrack(tracks[1])\n      mediaStore.current[0] = {\n        audioTrack: tracks[0],\n        videoTrack: tracks[1]\n      }\n      setReady(true)\n    } else if (error) {\n      console.error(error)\n      setReady(false)\n    }\n    return () => {\n      if (tracks) {\n        // eslint-disable-next-line no-unused-expressions\n        tracks[0]?.close()\n        // eslint-disable-next-line no-unused-expressions\n        tracks[1]?.close()\n      }\n    }\n  }, [trackReady, error]) //, ready])\n\n  return (\n    <TracksProvider\n      value={{\n        localVideoTrack: localVideoTrack,\n        localAudioTrack: localAudioTrack\n      }}\n    >\n      {ready ? props.children : null}\n    </TracksProvider>\n  )\n}\n\nexport default TracksConfigure\n","import React, { useState, useContext, useEffect, useRef } from 'react'\nimport AgoraRTM, {\n  createLazyClient,\n  createLazyChannel,\n  RtmEvents,\n  RtmMessage\n} from 'agora-rtm-react'\nimport PropsContext from './PropsContext'\nimport {\n  RtmProvider,\n  muteRequest,\n  mutingDevice,\n  rtmStatusEnum,\n  userData,\n  popUpStateEnum,\n  messageObject\n} from './RtmContext'\nimport RtcContext from './RtcContext'\nimport AgoraRTC, { UID } from 'agora-rtc-react'\nimport { LocalContext } from './LocalUserContext'\nimport muteAudio from './Controls/Local/muteAudio'\nimport muteVideo from './Controls/Local/muteVideo'\n\nconst timeNow = () => new Date().getTime()\nconst useChannel = createLazyChannel()\nconst useClient = createLazyClient()\n/**\n * React component that contains the RTM logic. It manages the usernames, remote mute requests and provides data to the children components by wrapping them with context providers.\n */\nconst RtmConfigure = (props: any) => {\n  const { rtcProps, rtmProps } = useContext(PropsContext)\n  const [isLoggedIn, setLoggedIn] = useState<boolean>(false)\n  const rtmClient = useClient(rtcProps.appId)\n  const channel = useChannel(rtmClient, rtcProps.channel)\n  const localUid = useRef<string>('')\n  const timerValueRef: any = useRef(5)\n  const local = useContext(LocalContext)\n  const { rtmCallbacks } = useContext(PropsContext)\n  const [uidMap, setUidMap] = useState<Object>({})\n  const [usernames, setUsernames] = useState<Object>({})\n  const [userDataMap, setUserDataMap] = useState<Object>({})\n  const [popUpState, setPopUpState] = useState<popUpStateEnum>(\n    popUpStateEnum.closed\n  )\n  const [rtmStatus, setRtmStatus] = useState<rtmStatusEnum>(\n    rtmStatusEnum.offline\n  )\n  const {\n    localUid: rtcUid,\n    localAudioTrack,\n    localVideoTrack,\n    dispatch,\n    channelJoined\n  } = useContext(RtcContext)\n\n  const login = async () => {\n    const { tokenUrl } = rtcProps\n    if (tokenUrl) {\n      try {\n        const res = await fetch(\n          tokenUrl + '/rtm/' + (rtmProps?.uid || localUid.current)\n        )\n        const data = await res.json()\n        const serverToken = data.rtmToken\n        await rtmClient.login({\n          uid: rtmProps?.uid || localUid.current,\n          token: serverToken\n        })\n        timerValueRef.current = 5\n      } catch (error) {\n        setTimeout(async () => {\n          timerValueRef.current = timerValueRef.current + timerValueRef.current\n          login()\n        }, timerValueRef.current * 1000)\n      }\n    } else {\n      try {\n        await rtmClient.login({\n          uid: rtmProps?.uid || localUid.current,\n          token: rtmProps?.token || undefined\n        })\n        timerValueRef.current = 5\n      } catch (error) {\n        setTimeout(async () => {\n          timerValueRef.current = timerValueRef.current + timerValueRef.current\n          login()\n        }, timerValueRef.current * 1000)\n      }\n    }\n  }\n\n  const joinChannel = async () => {\n    try {\n      await channel.join()\n      timerValueRef.current = 5\n    } catch (error) {\n      setTimeout(async () => {\n        timerValueRef.current = timerValueRef.current + timerValueRef.current\n        joinChannel()\n      }, timerValueRef.current * 1000)\n    }\n  }\n\n  const init = async () => {\n    setRtmStatus(rtmStatusEnum.initialising)\n    // rtmProps?.uid\n    //   ? (localUid.current = String(rtmProps.uid))\n    //   :\n    rtcProps.uid\n      ? (localUid.current = String(rtcProps.uid))\n      : (localUid.current = String(timeNow()))\n\n    rtmClient.on('ConnectionStateChanged', (state, reason) => {\n      console.log(state, reason)\n    })\n\n    rtmClient.on('TokenExpired', async () => {\n      const { tokenUrl } = rtcProps\n      console.log('token expired - renewing')\n      if (tokenUrl) {\n        try {\n          const res = await fetch(\n            tokenUrl + '/rtm/' + (rtmProps?.uid || localUid.current)\n          )\n          const data = await res.json()\n          const serverToken = data.rtmToken\n          await rtmClient.renewToken(serverToken)\n          timerValueRef.current = 5\n        } catch (error) {\n          console.error('TokenExpiredError', error)\n        }\n      }\n    })\n\n    rtmClient.on('MessageFromPeer', (message, peerId) => {\n      handleReceivedMessage(message, peerId)\n    })\n\n    channel.on('ChannelMessage', (message, peerId) => {\n      handleReceivedMessage(message, peerId)\n    })\n\n    channel.on('MemberJoined', async (peerId) => {\n      await sendPeerMessage(createUserData(), peerId)\n    })\n    channel.on('MemberCountUpdated', async (count) => {\n      console.log('RTM-MemberCountUpdated: ', count)\n    })\n\n    // handle RTM callbacks\n    if (rtmCallbacks?.channel) {\n      Object.keys(rtmCallbacks.channel).map((callback) => {\n        if (rtmCallbacks.channel) {\n          channel.on(\n            callback as keyof RtmEvents.RtmChannelEvents,\n            rtmCallbacks.channel[callback]\n          )\n        }\n      })\n    } else if (rtmCallbacks?.client) {\n      Object.keys(rtmCallbacks.client).map((callback) => {\n        if (rtmCallbacks.client) {\n          rtmClient.on(\n            callback as keyof RtmEvents.RtmClientEvents,\n            rtmCallbacks.client[callback]\n          )\n        }\n      })\n    }\n\n    if (rtcProps.tokenUrl) {\n      const { tokenUrl, uid } = rtcProps\n      rtmClient.on('TokenExpired', async () => {\n        console.log('token expired')\n        const res = await fetch(tokenUrl + '/rtm/' + (uid || 0) + '/')\n        const data = await res.json()\n        const token = data.rtmToken\n        rtmClient.renewToken(token)\n      })\n    }\n\n    setRtmStatus(rtmStatusEnum.loggingIn)\n    await login()\n    setRtmStatus(rtmStatusEnum.loggedIn)\n    await joinChannel()\n    setRtmStatus(rtmStatusEnum.connected)\n    // console.log('!rtcUid', rtcUid, channelJoined)\n    setUsernames((p) => {\n      return { ...p, 0: rtmProps?.username }\n    })\n    sendChannelMessage(createUserData())\n  }\n\n  const createUserData = () => {\n    return {\n      messageType: 'UserData',\n      rtmId: rtmProps?.uid || localUid.current,\n      rtcId: rtcUid.current,\n      username: rtmProps?.username,\n      role: rtcProps.role === 'audience' ? 1 : 0,\n      uikit: {\n        platform: 'web',\n        framework: 'react',\n        version: '1.2.0'\n      },\n      agora: {\n        rtm: AgoraRTM.VERSION,\n        rtc: AgoraRTC.VERSION\n      }\n    } as userData\n  }\n\n  const sendMuteRequest = (device: mutingDevice, rtcId: UID, mute: boolean) => {\n    const forced = rtmProps?.showPopUpBeforeRemoteMute === false\n    const payload: muteRequest = {\n      messageType: 'MuteRequest',\n      device,\n      rtcId,\n      mute,\n      isForceful: forced\n    }\n    const peerId = uidMap[rtcId]\n    if (forced && !mute) {\n      console.log('cannot send force unmute request')\n    } else if (peerId) {\n      sendPeerMessage(payload, peerId)\n    } else {\n      console.log('peer not found')\n    }\n  }\n\n  const handleReceivedMessage = (message: RtmMessage, peerId: string) => {\n    let messageObject: messageObject | undefined\n    if (message.messageType === 'RAW') {\n      messageObject = parsePayload(message.rawMessage)\n    } else if (message.messageType === 'TEXT') {\n      messageObject = JSON.parse(message.text)\n    }\n    console.log(messageObject, peerId)\n    if (messageObject) {\n      switch (messageObject.messageType) {\n        case 'UserData':\n          handleReceivedUserDataMessage(messageObject)\n          break\n        case 'MuteRequest':\n          handleReceivedMuteMessage(messageObject)\n          break\n        case 'RtmDataRequest':\n          switch (messageObject.type) {\n            case 'ping':\n              handlePing(peerId)\n              break\n            case 'userData':\n              handleUserDataRequest(peerId)\n              break\n            default:\n              console.log(peerId)\n          }\n          break\n        default:\n          console.log('unknown message content')\n      }\n    } else {\n      console.log('unknown rtm message type')\n    }\n  }\n\n  const handleReceivedUserDataMessage = (userData: userData) => {\n    setUidMap((p) => {\n      return { ...p, [userData.rtcId]: userData.rtmId }\n    })\n    setUsernames((p) => {\n      return { ...p, [userData.rtcId]: userData.username }\n    })\n    setUserDataMap((p) => {\n      return { ...p, [userData.rtmId]: userData }\n    })\n    // console.log('userData', userData, userDataMap, uidMap)\n  }\n\n  const handleReceivedMuteMessage = (muteRequest: muteRequest) => {\n    // console.log('!muteRequest', muteRequest)\n    if (rtcUid.current === muteRequest.rtcId) {\n      if (muteRequest.isForceful) {\n        if (muteRequest.mute) {\n          if (muteRequest.device === mutingDevice.microphone) {\n            localAudioTrack && muteAudio(local, dispatch, localAudioTrack)\n          } else if (muteRequest.device === mutingDevice.camera) {\n            localVideoTrack && muteVideo(local, dispatch, localVideoTrack)\n          }\n        } else console.error('cannot force unmute')\n      } else {\n        if (muteRequest.device === mutingDevice.microphone) {\n          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteMic)\n          else setPopUpState(popUpStateEnum.unmuteMic)\n        } else if (muteRequest.device === mutingDevice.camera) {\n          if (muteRequest.mute) setPopUpState(popUpStateEnum.muteCamera)\n          else setPopUpState(popUpStateEnum.unmuteCamera)\n        }\n      }\n    }\n  }\n\n  const handlePing = (peerId: string) => {\n    sendPeerMessage({ messageType: 'RtmDataRequest', type: 'pong' }, peerId)\n  }\n\n  const handleUserDataRequest = (peerId: string) => {\n    sendPeerMessage(createUserData(), peerId)\n  }\n\n  const sendChannelMessage = async (payload: messageObject) => {\n    const message = rtmClient.createMessage({\n      text: JSON.stringify(payload),\n      messageType: AgoraRTM.MessageType.TEXT\n    })\n    try {\n      await channel.sendMessage(message)\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  const sendPeerMessage = async (payload: messageObject, peerId: string) => {\n    const message = rtmClient.createMessage({\n      text: JSON.stringify(payload),\n      messageType: AgoraRTM.MessageType.TEXT\n    })\n    try {\n      await rtmClient.sendMessageToPeer(message, String(peerId))\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  const end = async () => {\n    await rtmClient.logout()\n    // await channel.leave()\n    await rtmClient.removeAllListeners()\n    // await channel.removeAllListeners()\n  }\n\n  useEffect(() => {\n    // if RTC has joined channel then init\n    if (channelJoined) {\n      init()\n      setLoggedIn(true)\n    }\n    return () => {\n      if (channelJoined) {\n        end()\n      }\n    }\n  }, [rtcProps.channel, rtcProps.appId, channelJoined])\n\n  return (\n    <RtmProvider\n      value={{\n        rtmStatus,\n        sendPeerMessage,\n        sendChannelMessage,\n        sendMuteRequest,\n        rtmClient,\n        uidMap,\n        usernames,\n        userDataMap,\n        popUpState,\n        setPopUpState\n      }}\n    >\n      {isLoggedIn ? props.children : <React.Fragment />}\n    </RtmProvider>\n  )\n}\n\nconst enc = new TextEncoder()\nconst dec = new TextDecoder()\n\n/**\n * Create an RTM raw message from any serilizable JS Object, decode using the {@link parsePayload} function\n * @param msg message object\n * @returns Uint8Array\n */\nexport const createRawMessage = (msg: any) => {\n  return enc.encode(JSON.stringify(msg))\n}\n/**\n * Decode the received RTM message or message created using {@link createRawMessage}\n * @param data encoded raw RTM message\n * @returns JS Object\n */\nexport const parsePayload = (data: BufferSource) => {\n  return JSON.parse(dec.decode(data))\n}\n\nexport default RtmConfigure\n","import React, { CSSProperties, useContext } from 'react'\nimport PropsContext from '../../PropsContext'\nimport RtmContext, { popUpStateEnum } from '../../RtmContext'\nimport RtcContext from '../../RtcContext'\nimport muteVideo from '../Local/muteVideo'\nimport { LocalContext } from '../../LocalUserContext'\nimport muteAudio from '../Local/muteAudio'\n\nfunction PopUp() {\n  const { styleProps } = useContext(PropsContext)\n  const { popUpState, setPopUpState } = useContext(RtmContext)\n  const { popUpContainer } = styleProps || {}\n  const { dispatch, localVideoTrack, localAudioTrack } = useContext(RtcContext)\n  const local = useContext(LocalContext)\n\n  return popUpState !== popUpStateEnum.closed ? (\n    <div\n      style={{\n        ...styles.container,\n        ...popUpContainer\n      }}\n    >\n      <div style={{ color: '#fff', fontSize: 18, fontWeight: 700 }}>\n        {popUpState === popUpStateEnum.muteCamera ||\n        popUpState === popUpStateEnum.muteMic\n          ? 'Mute '\n          : 'Unmute '}\n        {popUpState === popUpStateEnum.muteCamera ||\n        popUpState === popUpStateEnum.unmuteCamera\n          ? 'Camera'\n          : 'Mic'}\n        ?\n      </div>\n      <div\n        style={{\n          flexDirection: 'row',\n          display: 'flex',\n          width: '100%',\n          justifyContent: 'space-around'\n        }}\n      >\n        <div\n          onClick={() => {\n            switch (popUpState) {\n              case popUpStateEnum.muteCamera:\n                local.hasVideo &&\n                  localVideoTrack &&\n                  muteVideo(local, dispatch, localVideoTrack)\n                break\n              case popUpStateEnum.muteMic:\n                local.hasAudio &&\n                  localAudioTrack &&\n                  muteAudio(local, dispatch, localAudioTrack)\n                break\n              case popUpStateEnum.unmuteCamera:\n                !local.hasVideo &&\n                  localVideoTrack &&\n                  muteVideo(local, dispatch, localVideoTrack)\n                break\n              case popUpStateEnum.unmuteMic:\n                !local.hasAudio &&\n                  localAudioTrack &&\n                  muteAudio(local, dispatch, localAudioTrack)\n                break\n            }\n            setPopUpState(popUpStateEnum.closed)\n          }}\n          style={styles.button}\n        >\n          Confirm\n        </div>\n        <div\n          style={styles.buttonClose}\n          onClick={() => setPopUpState(popUpStateEnum.closed)}\n        >\n          Close\n        </div>\n      </div>\n    </div>\n  ) : null\n}\n\nconst styles = {\n  button: {\n    color: '#fff',\n    cursor: 'pointer',\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderColor: '#fff',\n    padding: '2px 4px',\n    borderRadius: 4\n  } as CSSProperties,\n  buttonClose: {\n    color: '#fff',\n    cursor: 'pointer',\n    borderWidth: 2,\n    borderStyle: 'solid',\n    borderColor: '#fff',\n    padding: '2px 4px',\n    borderRadius: 4\n  },\n  container: {\n    backgroundColor: '#007bffaa',\n    position: 'absolute',\n    width: 240,\n    height: 80,\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    zIndex: 100,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-evenly',\n    alignItems: 'center'\n  } as CSSProperties\n}\n\nexport default PopUp\n","/**\n * @module AgoraUIKit\n */\nimport React, { useContext } from 'react'\nimport RtcConfigure from './RTCConfigure'\nimport PropsContext, {\n  PropsProvider,\n  PropsInterface,\n  layout\n} from './PropsContext'\nimport LocalControls from './Controls/LocalControls'\nimport PinnedVideo from './PinnedVideo'\nimport GridVideo from './GridVideo'\nimport TracksConfigure from './TracksConfigure'\nimport RtmConfigure from './RTMConfigure'\nimport LocalUserContext from './LocalUserContext'\nimport PopUp from './Controls/Remote/RemoteMutePopUp'\n\n/**\n * High level component to render the UI Kit\n * @param props {@link PropsInterface}\n */\nconst AgoraUIKit: React.FC<PropsInterface> = (props) => {\n  const { styleProps, rtcProps } = props\n  const { UIKitContainer } = styleProps || {}\n\n  return (\n    <PropsProvider value={props}>\n      <div\n        style={{\n          ...style,\n          ...UIKitContainer\n        }}\n      >\n        {rtcProps.role === 'audience' ? (\n          <VideocallUI />\n        ) : (\n          <TracksConfigure>\n            <VideocallUI />\n          </TracksConfigure>\n        )}\n      </div>\n    </PropsProvider>\n  )\n}\n\nexport const VideocallUI = () => {\n  const { rtcProps } = useContext(PropsContext)\n  return (\n    <RtcConfigure callActive={rtcProps.callActive}>\n      <LocalUserContext>\n        {rtcProps.disableRtm ? (\n          <React.Fragment>\n            {rtcProps?.layout === layout.grid ? <GridVideo /> : <PinnedVideo />}\n            <LocalControls />\n          </React.Fragment>\n        ) : (\n          <RtmConfigure>\n            <PopUp />\n            {rtcProps?.layout === layout.grid ? <GridVideo /> : <PinnedVideo />}\n            <LocalControls />\n          </RtmConfigure>\n        )}\n      </LocalUserContext>\n    </RtcConfigure>\n  )\n}\n\nconst style = {\n  display: 'flex',\n  flex: 1,\n  minHeight: 0,\n  flexDirection: 'column'\n} as React.CSSProperties\n\nexport default AgoraUIKit\n"],"names":["RtcContext","React","createContext","RtcProvider","Provider","RtcConsumer","Consumer","remoteTrackState","layout","ToggleState","initialValue","rtcProps","appId","channel","role","rtmProps","PropsContext","PropsProvider","MaxUidContext","MaxUidProvider","MaxUidConsumer","MinUidContext","MinUidProvider","MinUidConsumer","TracksContext","TracksProvider","initState","max","uid","hasAudio","no","hasVideo","min","isScreensharing","reducer","state","action","stateUpdate","uids","map","u","type","value","console","log","user","subbed","indexOf","minUpdate","length","UIKitUser","find","filter","pop","startScreenshare","track","screenshareToken","screenshareUid","tokenUrl","enableDualStream","init","screenClient","on","fetch","res","json","data","token","rtcToken","renewToken","leave","removeAllListeners","e","join","setClientRole","returnedUid","publish","enabled","localVideoTrackHasPublished","then","AgoraRTC","createClient","mode","codec","stop","close","stopScreenshare","useClient","RtcConfigure","props","useRef","screenTrack","isScreensharingRef","useContext","localVideoTrack","localAudioTrack","callbacks","useState","ready","setReady","channelJoined","setChannelJoined","joinRes","canJoin","Promise","resolve","reject","client","customRtcClient","localAudioTrackHasPublished","mediaStore","callActive","undefined","useReducer","uidState","dispatch","useEffect","args","remoteUser","current","mediaType","subscribe","_e","audioTrack","play","dualStreamMode","setStreamFallbackOption","curState","prevState","reason","events","Object","keys","apply","userUid","ignore","error","err","videoTrack","enableActiveSpeaker","activeSpeaker","grid","volumes","highestvolumeObj","reduce","highestVolume","volume","level","mapActiveSpeakerToZero","enableAudioVolumeIndicator","toggleScreensharing","start","createScreenVideoTrack","localUid","children","icons","videocam","Fragment","points","x","y","width","height","rx","ry","videocamOff","d","x1","y1","x2","y2","remoteSwap","callEnd","mic","micOff","screen","BtnTemplate","onClick","name","disabled","style","styleProps","theme","BtnTemplateStyles","iconSize","customIcon","borderRadius","borderWidth","borderStyle","borderColor","backgroundColor","alignItems","justifyContent","display","cursor","margin","src","alt","xmlns","viewBox","fill","opacity","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icons","EndCall","localBtnStyles","endCall","LocalContext","LocalUserContext","localUser","localState","newState","disabling","enabling","setEnabled","LocalAudioMute","muteLocalAudio","local","muteAudio","Screenshare","screenshare","LocalVideoMute","muteLocalVideo","muteVideo","LocalControls","localBtnContainer","zIndex","flexDirection","enableScreensharing","rtmStatusEnum","clientRoleRaw","mutingDevice","popUpStateEnum","RtmContext","RtmProvider","RtmConsumer","RemoteVideoMute","sendMuteRequest","uidMap","remoteBtnStyles","muteRemoteVideo","isMuted","camera","RemoteAudioMute","muteRemoteAudio","microphone","SwapUser","VideoPlaceholder","maxViewStyles","maxViewOverlayContainer","CustomVideoPlaceholder","key","imgContainer","img","isShown","btnContainer","showButtons","disableRtm","showSwap","flex","position","alignSelf","justifySelf","Username","usernames","displayUsername","styles","username","usernameText","background","padding","color","bottom","right","MaxVideoView","videoMode","renderModeProp","setIsShown","container","onMouseEnter","onMouseLeave","videoContainer","AgoraVideoPlayer","videoplayer","config","fit","overlay","MinVideoView","minViewStyles","minViewOverlayContainer","PinnedVideo","minViewContainer","pinnedVideoContainer","maxViewContainer","scrollViewContainer","parentRef","setWidth","setHeight","isLandscape","handleResize","offsetWidth","offsetHeight","window","addEventListener","removeEventListener","ref","overflow","maxUsers","className","scrollbar","overflowY","overflowX","minUsers","minHeight","minWidth","GridVideo","gridVideoCells","gridVideoContainer","users","innerWidth","innerHeight","unit","gridTemplateColumns","repeat","useTracks","createMicrophoneAndCameraTracks","encoderConfig","TracksConfigure","setLocalVideoTrack","setLocalAudioTrack","trackReady","tracks","timeNow","Date","getTime","useChannel","createLazyChannel","createLazyClient","RtmConfigure","isLoggedIn","setLoggedIn","rtmClient","timerValueRef","rtmCallbacks","setUidMap","setUsernames","userDataMap","setUserDataMap","closed","popUpState","setPopUpState","offline","rtmStatus","setRtmStatus","rtcUid","login","serverToken","rtmToken","setTimeout","joinChannel","initialising","String","message","peerId","handleReceivedMessage","sendPeerMessage","createUserData","count","callback","loggingIn","loggedIn","connected","p","sendChannelMessage","messageType","rtmId","rtcId","uikit","platform","framework","version","agora","rtm","AgoraRTM","VERSION","rtc","device","mute","forced","showPopUpBeforeRemoteMute","payload","isForceful","messageObject","parsePayload","rawMessage","JSON","parse","text","handleReceivedUserDataMessage","handleReceivedMuteMessage","handlePing","handleUserDataRequest","userData","muteRequest","muteMic","unmuteMic","muteCamera","unmuteCamera","createMessage","stringify","MessageType","TEXT","sendMessage","sendMessageToPeer","end","logout","enc","TextEncoder","dec","TextDecoder","createRawMessage","msg","encode","decode","PopUp","popUpContainer","fontSize","fontWeight","button","buttonClose","top","left","transform","AgoraUIKit","UIKitContainer","VideocallUI"],"mappings":"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"}